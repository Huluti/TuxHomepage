"use strict";function loadJSON(e,t){var n=new XMLHttpRequest;n.open("GET","data/"+e,!0),n.onload=function(){this.status>=200&&this.status<400?t(JSON.parse(this.response)):alert("Unable to download json data...")},n.onerror=function(){alert("Unable to download json data...")},n.send()}function createLinks(e){var t=document.querySelectorAll(".link"),n=e.hasOwnProperty(language)?language:defaultLanguage;Object.keys(e[n]).forEach(function(i,a){t[a].setAttribute("href",e[n][i]),t[a].textContent=i})}function changeDistrib(e){var t=document.getElementById("logo");if(distrib!==t.className){t.style.backgroundImage="url('img/"+distrib+"-logo.png')",t.className=distrib,document.getElementById("search").style.backgroundColor="#"+e[distrib].main_color;for(var n=document.querySelectorAll("#navbar a"),i=0;i<n.length;i++)n[i].style.color="#"+e[distrib].main_color;var a=document.querySelector(".website");a.setAttribute("href",e[distrib].website);var o=document.querySelector(".doc");o.setAttribute("href",e[distrib].doc);var s=document.querySelector(".distrowatch");s.setAttribute("href","https://distrowatch.com/"+distrib),Cookies.set("distrib",distrib,{expires:365,path:"/"})}}function changeEngine(e){var t=document.getElementById("engine");engine!==t.className&&(document.getElementById("form-search").setAttribute("action",e[engine].url),document.querySelector("input[type='search']").setAttribute("name",e[engine].parameter),t.className=engine,t.style.backgroundColor="#"+e[engine].colors.circle,t.style.color="#"+e[engine].colors.font,t.textContent=engine.charAt(0).toUpperCase(),Cookies.set("engine",engine,{expires:365,path:"/"}))}function changeLanguage(e){for(var t=[],n=0;n<languages.length;n++)t[languages[n]]=["option[value="+languages[n]+"]","textContent"];t.placeholder=["#input-search input","placeholder"],t.doc=["#doc-text","textContent"],t.website=["#website-text","textContent"],t.distrowatch=["#distrowatch-text","textContent"],t.about=["#about-text","textContent"],t.author=["#author-text","textContent"],t.description=["#description-text","textContent"],t.license=["#license-text","textContent"],t.github=["#github-text","textContent"],t.thanks=["#thanks-text","textContent"],t.contributors=["#contributors-text","textContent"],t.close=["#close-text","textContent"],Object.keys(t).forEach(function(n){void 0!==e[language][n]&&(document.querySelector(t[n][0])[t[n][1]]=e[language][n])}),Cookies.set("language",language,{expires:365,path:"/"})}function fillSelect(e){var t=document.querySelector("#"+e[0]);e[1].forEach(function(e){var n=document.createElement("option");n.value=e.toLowerCase().replace(" ",""),n.textContent=e,t.appendChild(n)});var n=e[0].substr(0,e[0].length-1);t.value=window[n]}function initDistribs(e){var t=[];Object.keys(e).forEach(function(n){t.push(e[n].name)}),fillSelect(["distribs",t]),changeDistrib(e)}function initEngines(e){var t=[];Object.keys(e).forEach(function(n){t.push(e[n].name)}),fillSelect(["engines",t]),changeEngine(e)}function initLanguages(e){languages=[],Object.keys(e).forEach(function(e){languages.push(e)}),fillSelect(["languages",languages]),changeLanguage(e)}var defaultDistrib="ubuntu",defaultEngine="duckduckgo",defaultLanguage="en",distrib=Cookies.get("distrib")?Cookies.get("distrib"):defaultDistrib,engine=Cookies.get("engine")?Cookies.get("engine"):defaultEngine,language=Cookies.get("language")?Cookies.get("language"):defaultLanguage,languages=[];loadJSON("links.min.json",createLinks),loadJSON("distribs.min.json",initDistribs),loadJSON("engines.min.json",initEngines),loadJSON("translations.min.json",initLanguages),document.getElementById("distribs").onchange=function(){distrib=this.value,loadJSON("distribs.min.json",changeDistrib)},document.getElementById("engines").onchange=function(){engine=this.value,loadJSON("engines.min.json",changeEngine)},document.getElementById("languages").onchange=function(){language=this.value,loadJSON("translations.min.json",changeLanguage),loadJSON("links.min.json",createLinks)};